```
设置
{
	主程序
	{
		描述: "房主按F开始"
	}

	大厅
	{
		玩家上限 队伍1: 0
		玩家上限 队伍2: 3
	}

	模式
	{
		突击模式
		{
			启用地图
			{
				沃斯卡娅工业区
			}
		}

		综合
		{
			允许切换英雄: 关闭
			游戏模式开始: 手动
			英雄限制: 关闭
			随机英雄复生: 开启
		}
	}

	英雄
	{
		队伍2
		{
			移动速度: 50%
		}

		综合
		{
			D.Va
			{
				无机甲重生: 开启
			}

			启用英雄
			{
				D.Va
			}
		}
	}
}

变量
{
	全局:
		0: she
		1: he
		2: say
		3: fk_times
		4: tmp
		5: fk_l
		6: fk_wait1
		7: fk_wait2
		8: fk
		9: prepare_hud
		10: watch_pos
		11: ok
		12: DEBUG_MODE
		13: ntmp
		14: say2
		15: tmp2
		16: tip
		17: lock
		18: say3

	玩家:
		0: big
}

子程序
{
	0: fk
	1: fk_finish
	2: play
	3: go
	4: tip
}

规则("一键DEBUG")
{
	事件
	{
		持续 - 全局;
	}

	动作
	{
		全局.DEBUG_MODE = 地图工坊设置开关(自定义字符串("调试"), 自定义字符串("debug开关"), 假, 0);
	}
}

规则("debug1")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		是否是机器人(事件玩家) == 假;
		已重生(事件玩家) == 真;
		全局.DEBUG_MODE == 真;
	}

	动作
	{
		传送(事件玩家, 矢量(-32.004, 3.220, 38.102));
	}
}

规则("debug")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		全局.DEBUG_MODE == 真;
	}

	动作
	{
		创建HUD文本(事件玩家, 自定义字符串("位置 {0}", 所选位置(事件玩家)), 无, 无, 左边, 0, 颜色(白色), 颜色(白色), 颜色(白色), 可见和字符串, 默认可见度);
		创建HUD文本(事件玩家, 自定义字符串("命中 {0}", 射线命中位置(眼睛位置(事件玩家), 眼睛位置(事件玩家) + 1000 * 面朝方向(事件玩家), 所有玩家(所有队伍), 事件玩家, 真)), 无, 无, 左边, 0, 颜色(白色), 颜色(
			白色), 颜色(白色), 可见和字符串, 默认可见度);
		创建HUD文本(事件玩家, 自定义字符串("面朝方向{0}", 面朝方向(事件玩家)), 无, 无, 左边, 0, 颜色(白色), 颜色(白色), 颜色(白色), 可见和字符串, 默认可见度);
		创建HUD文本(事件玩家, 自定义字符串("fk = {0}", 全局.fk), 无, 无, 左边, 0, 颜色(白色), 颜色(白色), 颜色(白色), 可见和字符串, 默认可见度);
		创建HUD文本(事件玩家, 自定义字符串("眼睛{0}", 眼睛位置(事件玩家)), 无, 无, 左边, 0, 颜色(白色), 颜色(白色), 颜色(白色), 可见和字符串, 默认可见度);
	}
}

规则("init")
{
	事件
	{
		持续 - 全局;
	}

	动作
	{
		关闭游戏预设音乐模式;
		生成机器人(英雄(D.Va), 队伍1, 0, 矢量(0, 0, 0), 矢量(0, 0, -1));
		等待(1, 无视条件);
		生成机器人(英雄(卡西迪), 队伍1, 1, 矢量(0, 0, 0), 矢量(0, 0, 1));
		生成机器人(英雄(奥丽莎), 队伍1, 2, 矢量(0, 0, 0), 矢量(0, 0, 0));
		创建HUD文本(所有玩家(所有队伍), 自定义字符串("请等待房主按互动键开始\r\n房主可以使用DVa皮肤，建议用旧正机甲/破浪者皮肤"), 无, 无, 顶部, 0, 颜色(绿色), 颜色(白色), 颜色(白色), 可见和字符串, 默认可见度);
		全局.prepare_hud = 上一个文本ID;
		全局.watch_pos = 矢量(-35.290, 3.650, 72.010);
		生成机器人(英雄(D.Va), 队伍1, 3, 矢量(-33.510, 4.109, 34.207), 矢量(1, 0, 0));
		生成机器人(英雄(D.Va), 队伍1, 4, 矢量(-33.604, 3.270, 43.764), 矢量(1, 0, 0));
	}
}

规则("she")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		D.Va;
	}

	条件
	{
		已重生(事件玩家) == 真;
		禁用 是否是机器人(事件玩家) == 真;
		禁用 栏位(事件玩家) == 0;
		主机玩家 == 事件玩家;
	}

	动作
	{
		全局.she = 事件玩家;
		事件玩家.big = 1.200;
		开始调整玩家大小(事件玩家, 事件玩家.big, 真);
		取消与玩家的移动碰撞(事件玩家);
		取消与环境的移动碰撞(事件玩家, 假);
		传送(事件玩家, 矢量(-36.220, 3.220, 41.940));
		关闭游戏预设复生模式(事件玩家);
	}
}

规则("he bot")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		卡西迪;
	}

	条件
	{
		已重生(事件玩家) == 真;
		是否是机器人(事件玩家) == 真;
	}

	动作
	{
		事件玩家.big = 1.150;
		开始调整玩家大小(事件玩家, 事件玩家.big, 真);
		取消与玩家的移动碰撞(事件玩家);
		全局.he = 事件玩家;
		传送(事件玩家, 矢量(-36.224, 3.222, 33.742));
		取消与环境的移动碰撞(事件玩家, 假);
	}
}

规则("say bot")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		奥丽莎;
	}

	条件
	{
		已重生(事件玩家) == 真;
		是否是机器人(事件玩家) == 真;
	}

	动作
	{
		传送(事件玩家, 矢量(-16.754, -3.178, 36.946));
		禁用 开始调整玩家大小(事件玩家, 0.100, 真);
		禁用 设置不可见(事件玩家, 全部);
		全局.say = 事件玩家;
		取消与玩家的移动碰撞(事件玩家);
		取消与环境的移动碰撞(事件玩家, 假);
		开始修改英雄语音(事件玩家, 1, 真);
		设置状态(事件玩家, 无, 无敌, 9999);
	}
}

规则("say bot 2")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		是否是机器人(事件玩家) == 真;
		栏位(事件玩家) == 3;
		已重生(事件玩家) == 真;
	}

	动作
	{
		全局.say2 = 事件玩家;
		设置状态(事件玩家, 无, 无法杀死, 9999);
		禁用 设置不可见(事件玩家, 全部);
		禁用 开始调整玩家大小(事件玩家, 0.500, 真);
		设置最大生命值(事件玩家, 500);
		设置玩家生命值(事件玩家, 499);
	}
}

规则("sub fk")
{
	事件
	{
		子程序;
		fk;
	}

	动作
	{
		For 全局变量(tmp, 0, 全局.fk_times, 1);
			全局.ntmp = 随机实数(1, 全局.fk_l);
			施加推力(全局.he, 前, 全局.ntmp, 至玩家, 取消相反运动);
			等待(全局.fk_wait1, 无视条件);
			交流(全局.say, 不行);
			施加推力(全局.he, 后, 全局.ntmp, 至玩家, 取消相反运动);
			等待(全局.fk_wait2, 无视条件);
			全局.tip += 1;
			If(全局.tip % 随机整数(2, 4) == 0);
				调用子程序(tip);
			End;
		End;
		全局.fk += 1;
		调用子程序(fk_finish);
	}
}

规则("sub fk finish")
{
	事件
	{
		子程序;
		fk_finish;
	}

	动作
	{
		If(全局.fk == 1);
			全局.fk_times = 随机整数(30, 65);
			全局.fk_l = 3;
			全局.fk_wait1 = 0.300;
			全局.fk_wait2 = 0.300;
			调用子程序(fk);
		End;
		If(全局.fk == 2);
			全局.fk_times = 随机整数(30, 65);
			全局.fk_l = 3.500;
			全局.fk_wait1 = 0.250;
			全局.fk_wait2 = 0.250;
			调用子程序(fk);
		End;
		If(全局.fk == 3);
			全局.fk_times = 随机整数(25, 50);
			全局.fk_l = 3.500;
			全局.fk_wait1 = 0.200;
			全局.fk_wait2 = 0.200;
			调用子程序(fk);
		End;
		If(全局.fk == 4);
			全局.fk_times = 随机整数(35, 60);
			全局.fk_l = 3.500;
			全局.fk_wait1 = 0.100;
			全局.fk_wait2 = 0.100;
			调用子程序(fk);
		End;
		If(全局.fk == 5);
			停止所有持续伤害(全局.say2);
			停止所有持续伤害(全局.say3);
			按下按键(全局.he, 按钮(辅助攻击模式));
			等待(0.500, 无视条件);
			击杀(全局.she, 全局.he);
			小字体信息(所有玩家(队伍2), 自定义字符串("{0}:结束！", 英雄(卡西迪)));
		End;
	}
}

规则("master start")
{
	事件
	{
		持续 - 全局;
	}

	条件
	{
		按钮被按下(主机玩家, 按钮(互动)) == 真;
		全局.DEBUG_MODE == 假;
		全局.lock == 假;
	}

	动作
	{
		全局.lock = 真;
		消除HUD文本(全局.prepare_hud);
		隐藏游戏模式地图UI(所有玩家(所有队伍));
		隐藏游戏模式HUD(所有玩家(队伍2));
		隐藏英雄HUD(所有玩家(队伍2));
		创建地图文本(所有玩家(所有队伍), 自定义字符串("FBI WARNING！！\r\n18岁以下禁止观看！"), 全局.watch_pos, 50, 不要截取, 可见，位置和字符串, 颜色(红色), 默认可见度);
		开始镜头(所有玩家(队伍2), 矢量(-30.613, 3.220, 71.790), 全局.watch_pos, 9999);
		等待(5, 无视条件);
		全局.ok = 1;
		等待(0.500, 无视条件);
		调用子程序(play);
	}
}

规则("debug master start")
{
	事件
	{
		持续 - 全局;
	}

	条件
	{
		按钮被按下(主机玩家, 按钮(互动)) == 真;
		全局.DEBUG_MODE == 真;
		全局.lock == 假;
	}

	动作
	{
		全局.lock = 真;
		开始持续伤害(全局.say2, 主机玩家, 9999, 1);
		调用子程序(play);
	}
}

规则("play")
{
	事件
	{
		子程序;
		play;
	}

	动作
	{
		小字体信息(所有玩家(队伍2), 自定义字符串("{0}：试试新改造的{1}……", 英雄(卡西迪), 技能图标字符串(英雄(卡西迪), 按钮(技能2))));
		等待(0.300, 无视条件);
		开始朝向(全局.she, 方向(眼睛位置(全局.she), 眼睛位置(全局.he)), 9999, 至地图, 方向及角速率);
		开始朝向(全局.he, 方向(眼睛位置(全局.he), 眼睛位置(全局.she)), 9999, 至地图, 方向及角速率);
		等待(0.500, 无视条件);
		小字体信息(所有玩家(队伍2), 自定义字符串("{0}：你不要过来啊！！", 英雄(D.Va)));
		按下按键(全局.she, 按钮(主要攻击模式));
		等待(0.300, 无视条件);
		按下按键(全局.she, 按钮(主要攻击模式));
		等待(0.300, 无视条件);
		按下按键(全局.she, 按钮(主要攻击模式));
		等待(0.500, 无视条件);
		按下按键(全局.he, 按钮(技能1));
		等待(0.300, 无视条件);
		按下按键(全局.he, 按钮(技能2));
		设置状态(全局.she, 无, 击晕, 1);
		等待(1, 无视条件);
		播放效果(所有玩家(所有队伍), 有害选择效果 , 颜色(亮紫色), 全局.she, 3);
		设置状态(全局.she, 无, 被入侵, 2);
		等待(1, 无视条件);
		调用子程序(go);
	}
}

规则("go")
{
	事件
	{
		子程序;
		go;
	}

	动作
	{
		取消与环境的移动碰撞(全局.he, 假);
		开始朝向(全局.she, 矢量(-0.088, -0.880, -0.460), 9999, 至地图, 方向及角速率);
		传送(全局.she, 矢量(-40.780, 2.950, 37.348));
		设置状态(全局.she, 无, 击倒, 9999);
		设置状态(全局.she, 无, 无敌, 9999);
		设置状态(全局.he, 无, 无敌, 9999);
		传送(全局.he, 矢量(-41.050, 2.020, 37));
		If(全局.DEBUG_MODE == 假);
			全局.ok = 2;
		End;
		开始朝向(全局.he, 方向(眼睛位置(全局.he), 矢量(-41.370, 3.270, 37.590)), 9999, 至地图, 方向及角速率);
		全局.fk_times = 随机整数(20, 50);
		全局.fk_l = 3;
		全局.fk_wait1 = 0.500;
		全局.fk_wait2 = 0.300;
		全局.fk = 0;
		等待(2, 无视条件);
		调用子程序(fk);
	}
}

规则("ok 1")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		全局.ok == 1;
		是否是机器人(事件玩家) == 假;
	}

	动作
	{
		取消与玩家的移动碰撞(事件玩家);
		取消与环境的移动碰撞(事件玩家, 假);
		禁用 设置不可见(事件玩家, 全部);
		开始镜头(事件玩家, 矢量(-32.004, 3.220, 38.102), 矢量(-39.800, 3.260, 38.150), 9999);
	}
}

规则("ok 2")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		全局.ok == 2;
		是否是机器人(事件玩家) == 假;
	}

	动作
	{
		禁用按钮(事件玩家, 按钮(主要攻击模式));
		禁用按钮(事件玩家, 按钮(辅助攻击模式));
		禁用按钮(事件玩家, 按钮(技能1));
		禁用按钮(事件玩家, 按钮(技能2));
		禁用按钮(事件玩家, 按钮(近身攻击));
		禁用按钮(事件玩家, 按钮(终极技能));
		禁用 传送(事件玩家, 矢量(-42.613, 5.035, 36.671));
		禁用 开始调整玩家大小(事件玩家, 0.500, 真);
		开始镜头(事件玩家, 矢量(-39.620, 3.856, 37.543), 矢量(-41.600, 2.910, 36.880), 9999);
		开始持续伤害(全局.say2, 事件玩家, 9999, 1);
		等待(0.300, 无视条件);
		开始持续伤害(全局.say3, 事件玩家, 9999, 1);
	}
}

禁用 规则("规则 16")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		按钮被按下(事件玩家, 按钮(装填)) == 真;
	}

	动作
	{
		禁用 设置朝向(事件玩家, 矢量(0, 0, -1), 至地图);
		设置状态(事件玩家, 无, 沉睡, 9999);
		开始镜头(事件玩家, 眼睛位置(事件玩家) + 1 * 上, 所选位置(事件玩家), 9999);
	}
}

禁用 规则("规则 17")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		按钮被按下(事件玩家, 按钮(近身攻击)) == 真;
	}

	动作
	{
		清除状态(事件玩家, 沉睡);
		停止镜头(事件玩家);
	}
}

规则("提 ♂示")
{
	事件
	{
		子程序;
		tip;
	}

	动作
	{
		全局.tmp2 = 随机整数(1, 15);
		If(全局.tmp2 == 1);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("啊~嗯。")));
		End;
		If(全局.tmp2 == 2);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("好~……深~")));
		End;
		If(全局.tmp2 == 3);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("啊啊，啊啊！~")));
		End;
		If(全局.tmp2 == 4);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("快点~…………再快点！")));
		End;
		If(全局.tmp2 == 5);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("哦！嗯……啊~")));
		End;
		If(全局.tmp2 == 6);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("啊~嗯。")));
		End;
		If(全局.tmp2 == 7);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("啊啊，啊啊！~")));
		End;
		If(全局.tmp2 == 8);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("好~……深~")));
		End;
		If(全局.tmp2 == 9);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("快点~…………再快点！")));
		End;
		If(全局.tmp2 == 10);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("哦！嗯……啊~")));
		End;
		If(全局.tmp2 == 11);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("啊…唔…不要~")));
		End;
		If(全局.tmp2 == 12);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("快……曹飞我~啊啊~！")));
		End;
		If(全局.tmp2 == 13);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("哦！嗯……啊~")));
		End;
		If(全局.tmp2 == 14);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("哦！嗯……啊~")));
		End;
		If(全局.tmp2 == 15);
			小字体信息(所有玩家(队伍2), 字符串("{0}:{1}", 英雄(D.Va), 自定义字符串("唔……啊啊啊~")));
		End;
	}
}

规则("say bot 3")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		是否是机器人(事件玩家) == 真;
		栏位(事件玩家) == 4;
		已重生(事件玩家) == 真;
	}

	动作
	{
		全局.say3 = 事件玩家;
		设置状态(事件玩家, 无, 无法杀死, 9999);
		禁用 设置不可见(事件玩家, 全部);
		禁用 开始调整玩家大小(事件玩家, 0.500, 真);
		设置最大生命值(事件玩家, 500);
		设置玩家生命值(事件玩家, 499);
	}
}

规则("规则 21")
{
	事件
	{
		持续 - 每名玩家;
		双方;
		全部;
	}

	条件
	{
		已重生(事件玩家) == 真;
		是否是机器人(事件玩家) == 假;
	}

	动作
	{
		设置状态(事件玩家, 无, 定身, 9999);
	}
}
```
